============================================== EXPLICACIÓN DEL
PROGRAMA - GESTOR DE OPINIONES
==============================================

1.  DESCRIPCIÓN GENERAL

El programa es una API REST construida con Express.js que permite:

-   Autenticación de usuarios
-   Gestión de usuarios
-   Creación de publicaciones (opiniones)
-   Creación de comentarios
-   Manejo de roles
-   Seguridad y control de errores

La ruta base del sistema es:

/api/v1

==================================================== 2. PUNTO DE
ENTRADA - index.js ====================================================

Este archivo inicia la aplicación.

Funciones principales: - Carga variables de entorno con dotenv. - Maneja
errores globales (uncaughtException y unhandledRejection). - Llama a la
función que inicia el servidor.

==================================================== 3. CONFIGURACIÓN
DEL SERVIDOR - app.js
====================================================

Aquí se configura todo el servidor.

PASOS PRINCIPALES:

1)  Conexión a la base de datos Se conecta a PostgreSQL antes de iniciar
    el servidor.

2)  Seed de roles Se crean los roles básicos (ejemplo: ADMIN y USER) si
    no existen.

3)  Middlewares utilizados:

    -   express.json(): Permite recibir datos en formato JSON.
    -   cors(): Permite solicitudes desde otros dominios.
    -   helmet(): Mejora la seguridad HTTP.
    -   requestLimit: Limita la cantidad de peticiones.
    -   morgan: Muestra logs en consola.
    -   errorHandler: Maneja errores globales.

4)  Rutas principales: /api/v1/auth /api/v1/users /api/v1/publication
    /api/v1/comments

Endpoint de prueba: GET /api/v1/health Verifica si el servidor está
activo.

==================================================== 4. RAMA: AUTH
(Autenticación) ====================================================

Ruta base: /api/v1/auth

Función: Gestiona el registro y login de usuarios.

Endpoints:

POST /api/v1/auth/register - Registra un nuevo usuario. - Encripta la
contraseña. - Guarda el usuario en la base de datos.

POST /api/v1/auth/login - Verifica correo y contraseña. - Genera un
token JWT. - Devuelve el token para autenticación.

==================================================== 5. RAMA: USERS
(Usuarios) ====================================================

Ruta base: /api/v1/users

Función: Permite gestionar usuarios.

Endpoints:

GET /api/v1/users - Lista todos los usuarios.

GET /api/v1/users/:id - Obtiene un usuario específico.

PUT /api/v1/users/:id - Actualiza información del usuario.

DELETE /api/v1/users/:id - Elimina un usuario.

==================================================== 6. RAMA:
PUBLICATION (Publicaciones)
====================================================

Ruta base: /api/v1/publication

Función: Permite crear y gestionar publicaciones u opiniones.

Endpoints:

POST /api/v1/publication - Crea una nueva publicación.

GET /api/v1/publication - Lista todas las publicaciones.

GET /api/v1/publication/:id - Obtiene una publicación específica.

PUT /api/v1/publication/:id - Edita una publicación.

DELETE /api/v1/publication/:id - Elimina una publicación.

==================================================== 7. RAMA: COMMENTS
(Comentarios) ====================================================

Ruta base: /api/v1/comments

Función: Permite comentar publicaciones.

Endpoints:

POST /api/v1/comments - Crea un comentario.

GET /api/v1/comments - Lista comentarios.

GET /api/v1/comments/:id - Obtiene un comentario específico.

PUT /api/v1/comments/:id - Edita un comentario.

DELETE /api/v1/comments/:id - Elimina un comentario.

==================================================== 8. BASE DE DATOS
====================================================

El sistema utiliza: - PostgreSQL - Sequelize como ORM

Tablas principales: - users - roles - publications - comments

Relaciones: - Un usuario puede tener muchas publicaciones. - Una
publicación puede tener muchos comentarios. - Un comentario pertenece a
una publicación. - Un usuario tiene un rol.

==================================================== 9. MANEJO DE
ERRORES ====================================================

-   notFound: Se activa cuando la ruta no existe (Error 404).
-   errorHandler: Maneja errores internos del servidor (Error 500).

==================================================== 10. RESUMEN FINAL
====================================================

El sistema es una API REST completa que:

-   Autentica usuarios con JWT.
-   Maneja roles.
-   Permite crear publicaciones.
-   Permite comentar publicaciones.
-   Implementa seguridad con middlewares.
-   Controla errores globalmente.
-   Trabaja con base de datos PostgreSQL.

============================================== FIN DEL DOCUMENTO
==============================================
